<div class="container" style="padding: 20px; font-family: sans-serif;">
  <h1>Gestor Financeiro Pessoal</h1>

  <div class="saldo-box" 
       [style.color]="saldoTotal >= 0 ? 'green' : 'red'" 
       style="font-size: 1.5rem; margin-bottom: 20px; font-weight: bold;">
    Saldo Atual: {{ saldoTotal | currency: 'BRL' }}
  </div>

  <button (click)="mostrarFormulario = !mostrarFormulario" style="margin-bottom: 20px; padding: 10px;">
    {{ mostrarFormulario ? 'Cancelar' : '+ Nova Transação' }}
  </button>

  <div [hidden]="!mostrarFormulario" style="border: 1px solid #ccc; padding: 15px; margin-bottom: 20px;">
    <h3>Registrar Movimentação</h3>
    <form #f="ngForm" (ngSubmit)="registrarTransacao(f)"> 
      
      <label>Tipo:</label><br>
      <select name="type" ngModel required style="margin-bottom: 10px;">
        <option value="Receita">Receita</option>
        <option value="Despesa">Despesa</option>
      </select><br>

      <label>Descrição:</label><br>
      <input type="text" name="description" ngModel required style="width: 100%; margin-bottom: 10px;"><br>

      <label>Categoria:</label><br>
      <input type="text" name="category" ngModel required style="width: 100%; margin-bottom: 10px;"><br>

      <label>Valor:</label><br>
      <input type="number" name="value" ngModel required min="0.01" style="width: 100%; margin-bottom: 10px;"><br>

      <label>Data:</label><br>
      <input type="date" name="date" ngModel required style="width: 100%; margin-bottom: 20px;"><br>

      <button type="submit" [disabled]="f.invalid" style="padding: 10px; background-color: #4CAF50; color: white; border: none;">
        Registrar
      </button>
    </form>
  </div>
  <h2>Movimentações</h2>

  <table border="1" style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr style="background-color: #f0f0f0;">
        <th>Data</th>
        <th>Descrição</th>
        <th>Categoria</th>
        <th>Tipo</th>
        <th>Valor</th>
      </tr>
    </thead>
    <tbody>
      @for (item of transacoes; track item._id) {
        <tr>
          <td>{{ item.date | date: 'dd/MM/yyyy' }}</td>
          <td>{{ item.description }}</td>
          <td>{{ item.category }}</td>
          <td [style.color]="item.type === 'Receita' ? 'green' : 'red'">
            {{ item.type }}
          </td>
          <td>{{ item.value | currency: 'BRL' }}</td>
        </tr>
      } @empty {
        <tr>
          <td colspan="5" style="text-align: center;">Nenhuma movimentação registrada.</td>
        </tr>
      }
    </tbody>
  </table>
</div>